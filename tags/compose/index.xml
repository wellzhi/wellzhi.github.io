<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Compose on wellzhi</title><link>https://wellzhi.github.io/tags/compose/</link><description>Recent content in Compose on wellzhi</description><generator>Hugo -- 0.147.2</generator><language>zh-cn</language><lastBuildDate>Sat, 07 Aug 2010 00:00:00 +0000</lastBuildDate><atom:link href="https://wellzhi.github.io/tags/compose/index.xml" rel="self" type="application/rss+xml"/><item><title>Docker Compose Â∏∏Áî®ÂëΩ‰ª§</title><link>https://wellzhi.github.io/posts/tech/2010-08-07_docker-compose/</link><pubDate>Sat, 07 Aug 2010 00:00:00 +0000</pubDate><guid>https://wellzhi.github.io/posts/tech/2010-08-07_docker-compose/</guid><description>&lt;p>‰ª•‰∏ãÊòØ &lt;strong>Docker Compose&lt;/strong> ÁöÑÂ∏∏Áî®ÂëΩ‰ª§ÂàÜÁ±ªÊï¥ÁêÜÔºåÁªìÂêàÂäüËÉΩÂú∫ÊôØÂΩíÁ∫≥‰∏∫ &lt;strong>5 Á±ªÊ†∏ÂøÉÊìç‰Ωú&lt;/strong>ÔºåÂπ∂ÈôÑÂÖ≥ÈîÆÂèÇÊï∞ËØ¥Êòé‰∏éÁ§∫‰æãÔºåÊñπ‰æøÂø´ÈÄüÊü•ÈòÖÔºö&lt;/p>
&lt;hr>
&lt;h3 id="-‰∏ÄÊ†∏ÂøÉÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜ">üöÄ &lt;strong>‰∏Ä„ÄÅÊ†∏ÂøÉÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜ&lt;/strong>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">ÂëΩ‰ª§&lt;/th>
&lt;th style="text-align: left">ÂäüËÉΩ&lt;/th>
&lt;th style="text-align: left">Â∏∏Áî®ÂèÇÊï∞&lt;/th>
&lt;th style="text-align: left">Á§∫‰æã&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose up&lt;/code>&lt;/td>
&lt;td style="text-align: left">ÊûÑÂª∫ÈïúÂÉè„ÄÅÂàõÂª∫Âπ∂ÂêØÂä®ÊâÄÊúâÊúçÂä°&lt;/td>
&lt;td style="text-align: left">&lt;code>-d&lt;/code> ÂêéÂè∞ËøêË°å&lt;br>&lt;code>--build&lt;/code> Âº∫Âà∂ÈáçÂª∫ÈïúÂÉè&lt;br>&lt;code>--force-recreate&lt;/code> Âº∫Âà∂ÈáçÂª∫ÂÆπÂô®&lt;br>&lt;code>--scale SERVICE=NUM&lt;/code> Êâ©Áº©ÂÆπ&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose up -d --build&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose down&lt;/code>&lt;/td>
&lt;td style="text-align: left">ÂÅúÊ≠¢Âπ∂Âà†Èô§ÂÆπÂô®„ÄÅÁΩëÁªú„ÄÅÂç∑&lt;/td>
&lt;td style="text-align: left">&lt;code>-v&lt;/code> Âà†Èô§Êï∞ÊçÆÂç∑&lt;br>&lt;code>--rmi all&lt;/code> Âà†Èô§ÊâÄÊúâÈïúÂÉè&lt;br>&lt;code>--remove-orphans&lt;/code> Ê∏ÖÁêÜÊú™ÂÆö‰πâÂÆπÂô®&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose down -v --remove-orphans&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h3 id="-‰∫åÊúçÂä°Áä∂ÊÄÅÊéßÂà∂">‚öôÔ∏è &lt;strong>‰∫å„ÄÅÊúçÂä°Áä∂ÊÄÅÊéßÂà∂&lt;/strong>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">ÂëΩ‰ª§&lt;/th>
&lt;th style="text-align: left">ÂäüËÉΩ&lt;/th>
&lt;th style="text-align: left">Â∏∏Áî®ÂèÇÊï∞&lt;/th>
&lt;th style="text-align: left">Á§∫‰æã&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose start&lt;/code>&lt;/td>
&lt;td style="text-align: left">ÂêØÂä®Â∑≤Â≠òÂú®ÁöÑÂÆπÂô®&lt;/td>
&lt;td style="text-align: left">&lt;code>&amp;lt;ÊúçÂä°Âêç&amp;gt;&lt;/code> ÊåáÂÆöÊúçÂä°&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose start web&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose stop&lt;/code>&lt;/td>
&lt;td style="text-align: left">ÂÅúÊ≠¢ËøêË°å‰∏≠ÁöÑÂÆπÂô®Ôºà‰øùÁïôÂÆπÂô®Ôºâ&lt;/td>
&lt;td style="text-align: left">&lt;code>-t &amp;lt;Áßí&amp;gt;&lt;/code> Ë∂ÖÊó∂Êó∂Èó¥&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose stop -t 5&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose restart&lt;/code>&lt;/td>
&lt;td style="text-align: left">ÈáçÂêØÊúçÂä°ÔºàÂÖàÂÅúÂêéÂêØÔºâ&lt;/td>
&lt;td style="text-align: left">&lt;code>-t &amp;lt;Áßí&amp;gt;&lt;/code> Ë∂ÖÊó∂Êó∂Èó¥&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose restart api&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose pause&lt;/code>&lt;br>&lt;code>docker compose unpause&lt;/code>&lt;/td>
&lt;td style="text-align: left">ÊöÇÂÅú/ÊÅ¢Â§çÊúçÂä°ËøêË°å&lt;/td>
&lt;td style="text-align: left">-&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose pause db&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h3 id="-‰∏âÊó•Âøó‰∏éË∞ÉËØï">üîç &lt;strong>‰∏â„ÄÅÊó•Âøó‰∏éË∞ÉËØï&lt;/strong>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">ÂëΩ‰ª§&lt;/th>
&lt;th style="text-align: left">ÂäüËÉΩ&lt;/th>
&lt;th style="text-align: left">Â∏∏Áî®ÂèÇÊï∞&lt;/th>
&lt;th style="text-align: left">Á§∫‰æã&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose logs&lt;/code>&lt;/td>
&lt;td style="text-align: left">Êü•ÁúãÊúçÂä°Êó•Âøó&lt;/td>
&lt;td style="text-align: left">&lt;code>-f&lt;/code> ÂÆûÊó∂Ë∑üË∏™&lt;br>&lt;code>--tail &amp;lt;Ë°åÊï∞&amp;gt;&lt;/code> ÊòæÁ§∫ÊúÄÂêéNË°å&lt;br>&lt;code>&amp;lt;ÊúçÂä°Âêç&amp;gt;&lt;/code> ÊåáÂÆöÊúçÂä°&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose logs -f --tail 100 web&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose exec&lt;/code>&lt;/td>
&lt;td style="text-align: left">Âú®ËøêË°å‰∏≠ÁöÑÂÆπÂô®ÂÜÖÊâßË°åÂëΩ‰ª§&lt;/td>
&lt;td style="text-align: left">&lt;code>-d&lt;/code> ÂêéÂè∞ÊâßË°å&lt;br>&lt;code>--user&lt;/code> ÊåáÂÆöÁî®Êà∑&lt;br>&lt;code>-T&lt;/code> Á¶ÅÁî®TTY&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose exec -u root db psql -U postgres&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose ps&lt;/code>&lt;/td>
&lt;td style="text-align: left">ÂàóÂá∫ÊâÄÊúâÊúçÂä°ÁöÑËøêË°åÁä∂ÊÄÅ&lt;/td>
&lt;td style="text-align: left">&lt;code>-a&lt;/code> ÊòæÁ§∫ÊâÄÊúâÂÆπÂô®&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose ps -a&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose port&lt;/code>&lt;/td>
&lt;td style="text-align: left">Êü•ÁúãÂÆπÂô®Á´ØÂè£Êò†Â∞ÑÁöÑÂÆø‰∏ªÊú∫Á´ØÂè£&lt;/td>
&lt;td style="text-align: left">&lt;code>--protocol=tcp/udp&lt;/code> ÊåáÂÆöÂçèËÆÆ&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose port web 80&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h3 id="-ÂõõÊûÑÂª∫‰∏éÈÖçÁΩÆ">üõ†Ô∏è &lt;strong>Âõõ„ÄÅÊûÑÂª∫‰∏éÈÖçÁΩÆ&lt;/strong>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">ÂëΩ‰ª§&lt;/th>
&lt;th style="text-align: left">ÂäüËÉΩ&lt;/th>
&lt;th style="text-align: left">Â∏∏Áî®ÂèÇÊï∞&lt;/th>
&lt;th style="text-align: left">Á§∫‰æã&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose build&lt;/code>&lt;/td>
&lt;td style="text-align: left">ÊûÑÂª∫ÊàñÈáçÊñ∞ÊûÑÂª∫ÊúçÂä°ÈïúÂÉè&lt;/td>
&lt;td style="text-align: left">&lt;code>--no-cache&lt;/code> Á¶ÅÁî®ÁºìÂ≠ò&lt;br>&lt;code>--pull&lt;/code> ÊãâÂèñÊúÄÊñ∞Âü∫Á°ÄÈïúÂÉè&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose build --no-cache api&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose pull&lt;/code>&lt;/td>
&lt;td style="text-align: left">ÊãâÂèñÊúçÂä°‰æùËµñÁöÑÈïúÂÉè&lt;/td>
&lt;td style="text-align: left">&lt;code>--ignore-pull-failures&lt;/code> ÂøΩÁï•ÈîôËØØ&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose pull --ignore-pull-failures&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose config&lt;/code>&lt;/td>
&lt;td style="text-align: left">È™åËØÅÂπ∂ËæìÂá∫ÊúÄÁªàÈÖçÁΩÆÔºàË∞ÉËØïYAMLÊñá‰ª∂Ôºâ&lt;/td>
&lt;td style="text-align: left">&lt;code>-q&lt;/code> ‰ªÖÈ™åËØÅ&lt;br>&lt;code>--services&lt;/code> ÂàóÂá∫ÊúçÂä°&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose config --services&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose run&lt;/code>&lt;/td>
&lt;td style="text-align: left">ÂêØÂä®Êñ∞ÂÆπÂô®ÊâßË°å‰∏ÄÊ¨°ÊÄßÂëΩ‰ª§ÔºàÂ¶ÇÊï∞ÊçÆÂ∫ìËøÅÁßªÔºâ&lt;/td>
&lt;td style="text-align: left">&lt;code>--rm&lt;/code> ÊâßË°åÂêéÂà†Èô§ÂÆπÂô®&lt;br>&lt;code>-e KEY=VAL&lt;/code> ËÆæÁΩÆÁéØÂ¢ÉÂèòÈáè&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose run --rm web python manage.py migrate&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h3 id="-‰∫îÂÖ∂‰ªñÂÆûÁî®ÂëΩ‰ª§">üß© &lt;strong>‰∫î„ÄÅÂÖ∂‰ªñÂÆûÁî®ÂëΩ‰ª§&lt;/strong>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">ÂëΩ‰ª§&lt;/th>
&lt;th style="text-align: left">ÂäüËÉΩ&lt;/th>
&lt;th style="text-align: left">ËØ¥Êòé&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose scale&lt;/code>&lt;/td>
&lt;td style="text-align: left">ËÆæÁΩÆÊúçÂä°ÂâØÊú¨Êï∞ÔºàÊóßÁâàÔºâ&lt;/td>
&lt;td style="text-align: left">Êñ∞ÁâàÊé®ËçêÁî® &lt;code>up --scale&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose kill&lt;/code>&lt;/td>
&lt;td style="text-align: left">Âº∫Âà∂ÁªàÊ≠¢ÊúçÂä°ÔºàÂèëÈÄÅSIGKILLÔºâ&lt;/td>
&lt;td style="text-align: left">&lt;code>-s SIGNAL&lt;/code> ÊåáÂÆö‰ø°Âè∑ÔºåÂ¶Ç &lt;code>SIGINT&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose images&lt;/code>&lt;/td>
&lt;td style="text-align: left">ÂàóÂá∫ÊúçÂä°‰ΩøÁî®ÁöÑÈïúÂÉè&lt;/td>
&lt;td style="text-align: left">-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose push&lt;/code>&lt;/td>
&lt;td style="text-align: left">Êé®ÈÄÅÊúçÂä°ÈïúÂÉèÂà∞‰ªìÂ∫ì&lt;/td>
&lt;td style="text-align: left">&lt;code>--ignore-push-failures&lt;/code> ÂøΩÁï•Êé®ÈÄÅÈîôËØØ&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h3 id="-ÈÄüÊü•Ë°®È´òÈ¢ëÂëΩ‰ª§ÁªÑÂêà">üìå &lt;strong>ÈÄüÊü•Ë°®ÔºöÈ´òÈ¢ëÂëΩ‰ª§ÁªÑÂêà&lt;/strong>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Âú∫ÊôØ&lt;/th>
&lt;th style="text-align: left">ÂëΩ‰ª§Á§∫‰æã&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">ÂêØÂä®ÊúçÂä°ÔºàÂêéÂè∞ËøêË°åÔºâ&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose up -d&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">ÂÅúÊ≠¢Âπ∂Ê∏ÖÁêÜÊâÄÊúâËµÑÊ∫ê&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose down -v --rmi all&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">Êü•ÁúãÂÆûÊó∂Êó•Âøó&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose logs -f --tail 50 web&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">ËøõÂÖ•ÂÆπÂô®ÊâßË°åÂëΩ‰ª§&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose exec web bash&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">È™åËØÅÈÖçÁΩÆÊñá‰ª∂ËØ≠Ê≥ï&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose config -q&lt;/code>ÔºàÊó†ËæìÂá∫Ë°®Á§∫Ê≠£Á°ÆÔºâ&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h3 id="-‰ΩøÁî®ÊäÄÂ∑ß">üí° &lt;strong>‰ΩøÁî®ÊäÄÂ∑ß&lt;/strong>&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>Â§öÁéØÂ¢ÉÈÖçÁΩÆ&lt;/strong>ÔºöÁî® &lt;code>-f&lt;/code> ÊåáÂÆöÂ§ö‰∏™Êñá‰ª∂ÔºàÂ¶ÇÂºÄÂèë/Áîü‰∫ßÁéØÂ¢ÉÔºâÔºö&lt;/p></description></item></channel></rss>