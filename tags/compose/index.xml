<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Compose on wellzhi</title><link>https://wellzhi.github.io/tags/compose/</link><description>Recent content in Compose on wellzhi</description><generator>Hugo -- 0.147.2</generator><language>zh-cn</language><lastBuildDate>Sat, 07 Aug 2010 00:00:00 +0000</lastBuildDate><atom:link href="https://wellzhi.github.io/tags/compose/index.xml" rel="self" type="application/rss+xml"/><item><title>Docker Compose å¸¸ç”¨å‘½ä»¤</title><link>https://wellzhi.github.io/posts/tech/2010-08-07_docker-compose/</link><pubDate>Sat, 07 Aug 2010 00:00:00 +0000</pubDate><guid>https://wellzhi.github.io/posts/tech/2010-08-07_docker-compose/</guid><description>&lt;p>ä»¥ä¸‹æ˜¯ &lt;strong>Docker Compose&lt;/strong> çš„å¸¸ç”¨å‘½ä»¤åˆ†ç±»æ•´ç†ï¼Œç»“åˆåŠŸèƒ½åœºæ™¯å½’çº³ä¸º &lt;strong>5 ç±»æ ¸å¿ƒæ“ä½œ&lt;/strong>ï¼Œå¹¶é™„å…³é”®å‚æ•°è¯´æ˜Žä¸Žç¤ºä¾‹ï¼Œæ–¹ä¾¿å¿«é€ŸæŸ¥é˜…ï¼š&lt;/p>
&lt;hr>
&lt;h3 id="-ä¸€æ ¸å¿ƒç”Ÿå‘½å‘¨æœŸç®¡ç†">ðŸš€ &lt;strong>ä¸€ã€æ ¸å¿ƒç”Ÿå‘½å‘¨æœŸç®¡ç†&lt;/strong>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">å‘½ä»¤&lt;/th>
&lt;th style="text-align: left">åŠŸèƒ½&lt;/th>
&lt;th style="text-align: left">å¸¸ç”¨å‚æ•°&lt;/th>
&lt;th style="text-align: left">ç¤ºä¾‹&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose up&lt;/code>&lt;/td>
&lt;td style="text-align: left">æž„å»ºé•œåƒã€åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡&lt;/td>
&lt;td style="text-align: left">&lt;code>-d&lt;/code> åŽå°è¿è¡Œ&lt;br>&lt;code>--build&lt;/code> å¼ºåˆ¶é‡å»ºé•œåƒ&lt;br>&lt;code>--force-recreate&lt;/code> å¼ºåˆ¶é‡å»ºå®¹å™¨&lt;br>&lt;code>--scale SERVICE=NUM&lt;/code> æ‰©ç¼©å®¹&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose up -d --build&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose down&lt;/code>&lt;/td>
&lt;td style="text-align: left">åœæ­¢å¹¶åˆ é™¤å®¹å™¨ã€ç½‘ç»œã€å·&lt;/td>
&lt;td style="text-align: left">&lt;code>-v&lt;/code> åˆ é™¤æ•°æ®å·&lt;br>&lt;code>--rmi all&lt;/code> åˆ é™¤æ‰€æœ‰é•œåƒ&lt;br>&lt;code>--remove-orphans&lt;/code> æ¸…ç†æœªå®šä¹‰å®¹å™¨&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose down -v --remove-orphans&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h3 id="-äºŒæœåŠ¡çŠ¶æ€æŽ§åˆ¶">âš™ï¸ &lt;strong>äºŒã€æœåŠ¡çŠ¶æ€æŽ§åˆ¶&lt;/strong>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">å‘½ä»¤&lt;/th>
&lt;th style="text-align: left">åŠŸèƒ½&lt;/th>
&lt;th style="text-align: left">å¸¸ç”¨å‚æ•°&lt;/th>
&lt;th style="text-align: left">ç¤ºä¾‹&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose start&lt;/code>&lt;/td>
&lt;td style="text-align: left">å¯åŠ¨å·²å­˜åœ¨çš„å®¹å™¨&lt;/td>
&lt;td style="text-align: left">&lt;code>&amp;lt;æœåŠ¡å&amp;gt;&lt;/code> æŒ‡å®šæœåŠ¡&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose start web&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose stop&lt;/code>&lt;/td>
&lt;td style="text-align: left">åœæ­¢è¿è¡Œä¸­çš„å®¹å™¨ï¼ˆä¿ç•™å®¹å™¨ï¼‰&lt;/td>
&lt;td style="text-align: left">&lt;code>-t &amp;lt;ç§’&amp;gt;&lt;/code> è¶…æ—¶æ—¶é—´&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose stop -t 5&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose restart&lt;/code>&lt;/td>
&lt;td style="text-align: left">é‡å¯æœåŠ¡ï¼ˆå…ˆåœåŽå¯ï¼‰&lt;/td>
&lt;td style="text-align: left">&lt;code>-t &amp;lt;ç§’&amp;gt;&lt;/code> è¶…æ—¶æ—¶é—´&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose restart api&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose pause&lt;/code>&lt;br>&lt;code>docker compose unpause&lt;/code>&lt;/td>
&lt;td style="text-align: left">æš‚åœ/æ¢å¤æœåŠ¡è¿è¡Œ&lt;/td>
&lt;td style="text-align: left">-&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose pause db&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h3 id="-ä¸‰æ—¥å¿—ä¸Žè°ƒè¯•">ðŸ” &lt;strong>ä¸‰ã€æ—¥å¿—ä¸Žè°ƒè¯•&lt;/strong>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">å‘½ä»¤&lt;/th>
&lt;th style="text-align: left">åŠŸèƒ½&lt;/th>
&lt;th style="text-align: left">å¸¸ç”¨å‚æ•°&lt;/th>
&lt;th style="text-align: left">ç¤ºä¾‹&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose logs&lt;/code>&lt;/td>
&lt;td style="text-align: left">æŸ¥çœ‹æœåŠ¡æ—¥å¿—&lt;/td>
&lt;td style="text-align: left">&lt;code>-f&lt;/code> å®žæ—¶è·Ÿè¸ª&lt;br>&lt;code>--tail &amp;lt;è¡Œæ•°&amp;gt;&lt;/code> æ˜¾ç¤ºæœ€åŽNè¡Œ&lt;br>&lt;code>&amp;lt;æœåŠ¡å&amp;gt;&lt;/code> æŒ‡å®šæœåŠ¡&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose logs -f --tail 100 web&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose exec&lt;/code>&lt;/td>
&lt;td style="text-align: left">åœ¨è¿è¡Œä¸­çš„å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤&lt;/td>
&lt;td style="text-align: left">&lt;code>-d&lt;/code> åŽå°æ‰§è¡Œ&lt;br>&lt;code>--user&lt;/code> æŒ‡å®šç”¨æˆ·&lt;br>&lt;code>-T&lt;/code> ç¦ç”¨TTY&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose exec -u root db psql -U postgres&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose ps&lt;/code>&lt;/td>
&lt;td style="text-align: left">åˆ—å‡ºæ‰€æœ‰æœåŠ¡çš„è¿è¡ŒçŠ¶æ€&lt;/td>
&lt;td style="text-align: left">&lt;code>-a&lt;/code> æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose ps -a&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose port&lt;/code>&lt;/td>
&lt;td style="text-align: left">æŸ¥çœ‹å®¹å™¨ç«¯å£æ˜ å°„çš„å®¿ä¸»æœºç«¯å£&lt;/td>
&lt;td style="text-align: left">&lt;code>--protocol=tcp/udp&lt;/code> æŒ‡å®šåè®®&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose port web 80&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h3 id="-å››æž„å»ºä¸Žé…ç½®">ðŸ› ï¸ &lt;strong>å››ã€æž„å»ºä¸Žé…ç½®&lt;/strong>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">å‘½ä»¤&lt;/th>
&lt;th style="text-align: left">åŠŸèƒ½&lt;/th>
&lt;th style="text-align: left">å¸¸ç”¨å‚æ•°&lt;/th>
&lt;th style="text-align: left">ç¤ºä¾‹&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose build&lt;/code>&lt;/td>
&lt;td style="text-align: left">æž„å»ºæˆ–é‡æ–°æž„å»ºæœåŠ¡é•œåƒ&lt;/td>
&lt;td style="text-align: left">&lt;code>--no-cache&lt;/code> ç¦ç”¨ç¼“å­˜&lt;br>&lt;code>--pull&lt;/code> æ‹‰å–æœ€æ–°åŸºç¡€é•œåƒ&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose build --no-cache api&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose pull&lt;/code>&lt;/td>
&lt;td style="text-align: left">æ‹‰å–æœåŠ¡ä¾èµ–çš„é•œåƒ&lt;/td>
&lt;td style="text-align: left">&lt;code>--ignore-pull-failures&lt;/code> å¿½ç•¥é”™è¯¯&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose pull --ignore-pull-failures&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose config&lt;/code>&lt;/td>
&lt;td style="text-align: left">éªŒè¯å¹¶è¾“å‡ºæœ€ç»ˆé…ç½®ï¼ˆè°ƒè¯•YAMLæ–‡ä»¶ï¼‰&lt;/td>
&lt;td style="text-align: left">&lt;code>-q&lt;/code> ä»…éªŒè¯&lt;br>&lt;code>--services&lt;/code> åˆ—å‡ºæœåŠ¡&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose config --services&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose run&lt;/code>&lt;/td>
&lt;td style="text-align: left">å¯åŠ¨æ–°å®¹å™¨æ‰§è¡Œä¸€æ¬¡æ€§å‘½ä»¤ï¼ˆå¦‚æ•°æ®åº“è¿ç§»ï¼‰&lt;/td>
&lt;td style="text-align: left">&lt;code>--rm&lt;/code> æ‰§è¡ŒåŽåˆ é™¤å®¹å™¨&lt;br>&lt;code>-e KEY=VAL&lt;/code> è®¾ç½®çŽ¯å¢ƒå˜é‡&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose run --rm web python manage.py migrate&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h3 id="-äº”å…¶ä»–å®žç”¨å‘½ä»¤">ðŸ§© &lt;strong>äº”ã€å…¶ä»–å®žç”¨å‘½ä»¤&lt;/strong>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">å‘½ä»¤&lt;/th>
&lt;th style="text-align: left">åŠŸèƒ½&lt;/th>
&lt;th style="text-align: left">è¯´æ˜Ž&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose scale&lt;/code>&lt;/td>
&lt;td style="text-align: left">è®¾ç½®æœåŠ¡å‰¯æœ¬æ•°ï¼ˆæ—§ç‰ˆï¼‰&lt;/td>
&lt;td style="text-align: left">æ–°ç‰ˆæŽ¨èç”¨ &lt;code>up --scale&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose kill&lt;/code>&lt;/td>
&lt;td style="text-align: left">å¼ºåˆ¶ç»ˆæ­¢æœåŠ¡ï¼ˆå‘é€SIGKILLï¼‰&lt;/td>
&lt;td style="text-align: left">&lt;code>-s SIGNAL&lt;/code> æŒ‡å®šä¿¡å·ï¼Œå¦‚ &lt;code>SIGINT&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose images&lt;/code>&lt;/td>
&lt;td style="text-align: left">åˆ—å‡ºæœåŠ¡ä½¿ç”¨çš„é•œåƒ&lt;/td>
&lt;td style="text-align: left">-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">&lt;code>docker compose push&lt;/code>&lt;/td>
&lt;td style="text-align: left">æŽ¨é€æœåŠ¡é•œåƒåˆ°ä»“åº“&lt;/td>
&lt;td style="text-align: left">&lt;code>--ignore-push-failures&lt;/code> å¿½ç•¥æŽ¨é€é”™è¯¯&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h3 id="-é€ŸæŸ¥è¡¨é«˜é¢‘å‘½ä»¤ç»„åˆ">ðŸ“Œ &lt;strong>é€ŸæŸ¥è¡¨ï¼šé«˜é¢‘å‘½ä»¤ç»„åˆ&lt;/strong>&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">åœºæ™¯&lt;/th>
&lt;th style="text-align: left">å‘½ä»¤ç¤ºä¾‹&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">å¯åŠ¨æœåŠ¡ï¼ˆåŽå°è¿è¡Œï¼‰&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose up -d&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">åœæ­¢å¹¶æ¸…ç†æ‰€æœ‰èµ„æº&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose down -v --rmi all&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">æŸ¥çœ‹å®žæ—¶æ—¥å¿—&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose logs -f --tail 50 web&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">è¿›å…¥å®¹å™¨æ‰§è¡Œå‘½ä»¤&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose exec web bash&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">éªŒè¯é…ç½®æ–‡ä»¶è¯­æ³•&lt;/td>
&lt;td style="text-align: left">&lt;code>docker compose config -q&lt;/code>ï¼ˆæ— è¾“å‡ºè¡¨ç¤ºæ­£ç¡®ï¼‰&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h3 id="-ä½¿ç”¨æŠ€å·§">ðŸ’¡ &lt;strong>ä½¿ç”¨æŠ€å·§&lt;/strong>&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>å¤šçŽ¯å¢ƒé…ç½®&lt;/strong>ï¼šç”¨ &lt;code>-f&lt;/code> æŒ‡å®šå¤šä¸ªæ–‡ä»¶ï¼ˆå¦‚å¼€å‘/ç”Ÿäº§çŽ¯å¢ƒï¼‰ï¼š&lt;/p></description></item></channel></rss>