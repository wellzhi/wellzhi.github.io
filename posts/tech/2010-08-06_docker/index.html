<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Docker常用命令 | wellzhi</title>
<meta name=keywords content="Docker"><meta name=description content="Docker 是一个开源的容器化平台，它允许开发者将应用程序及其依赖项打包到轻量级、可移植的容器中。通过使用容器技术，Docker 实现了应用程序的快速部署、扩展和管理，解决了传统虚拟化技术资源消耗大、启动慢的问题。本文详细介绍了Docker的常用命令，包括镜像管理、容器操作、网络配置、数据卷管理等核心功能，帮助开发者快速掌握Docker的使用技巧和最佳实践。"><meta name=author content="wellzhi"><link rel=canonical href=https://wellzhi.github.io/posts/tech/2010-08-06_docker/><link crossorigin=anonymous href=/assets/css/stylesheet.b54291e20a5b433add2181af00208e3e72d99f37b405cd9f3ff373c992518ba6.css integrity="sha256-tUKR4gpbQzrdIYGvACCOPnLZnze0Bc2fP/NzyZJRi6Y=" rel="preload stylesheet" as=style><script crossorigin=anonymous src=/assets/js/mermaid.min.af2e2ae7d64e037e8a582c3ba35b128209a6f8350c3825cda07833979e0d827c.js></script><link rel=icon href=https://wellzhi.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wellzhi.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wellzhi.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://wellzhi.github.io/apple-touch-icon.png><link rel=mask-icon href=https://wellzhi.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://wellzhi.github.io/posts/tech/2010-08-06_docker/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://wellzhi.github.io/posts/tech/2010-08-06_docker/"><meta property="og:site_name" content="wellzhi"><meta property="og:title" content="Docker常用命令"><meta property="og:description" content="Docker 是一个开源的容器化平台，它允许开发者将应用程序及其依赖项打包到轻量级、可移植的容器中。通过使用容器技术，Docker 实现了应用程序的快速部署、扩展和管理，解决了传统虚拟化技术资源消耗大、启动慢的问题。本文详细介绍了Docker的常用命令，包括镜像管理、容器操作、网络配置、数据卷管理等核心功能，帮助开发者快速掌握Docker的使用技巧和最佳实践。"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2010-08-06T00:00:00+00:00"><meta property="article:modified_time" content="2010-08-06T00:00:00+00:00"><meta property="article:tag" content="Docker"><meta name=twitter:card content="summary"><meta name=twitter:title content="Docker常用命令"><meta name=twitter:description content="Docker 是一个开源的容器化平台，它允许开发者将应用程序及其依赖项打包到轻量级、可移植的容器中。通过使用容器技术，Docker 实现了应用程序的快速部署、扩展和管理，解决了传统虚拟化技术资源消耗大、启动慢的问题。本文详细介绍了Docker的常用命令，包括镜像管理、容器操作、网络配置、数据卷管理等核心功能，帮助开发者快速掌握Docker的使用技巧和最佳实践。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wellzhi.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Tech","item":"https://wellzhi.github.io/posts/tech/"},{"@type":"ListItem","position":3,"name":"Docker常用命令","item":"https://wellzhi.github.io/posts/tech/2010-08-06_docker/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Docker常用命令","name":"Docker常用命令","description":"Docker 是一个开源的容器化平台，它允许开发者将应用程序及其依赖项打包到轻量级、可移植的容器中。通过使用容器技术，Docker 实现了应用程序的快速部署、扩展和管理，解决了传统虚拟化技术资源消耗大、启动慢的问题。本文详细介绍了Docker的常用命令，包括镜像管理、容器操作、网络配置、数据卷管理等核心功能，帮助开发者快速掌握Docker的使用技巧和最佳实践。","keywords":["Docker"],"articleBody":"Docker 是一个开源的容器化平台，它允许开发者将应用程序及其依赖项打包到轻量级、可移植的容器中。\n1. Docker 基础命令 1.1 查看 Docker 版本和信息 # 查看 Docker 版本 docker --version docker version # 查看 Docker 系统信息 docker info # 查看 Docker 帮助 docker --help docker --help 1.2 登录和登出 Docker Hub # 登录 Docker Hub docker login # 登录指定仓库 docker login registry.example.com # 登出 docker logout 2. 镜像管理命令 2.1 搜索和拉取镜像 # 搜索镜像 docker search nginx docker search --limit 10 nginx # 拉取镜像 docker pull nginx docker pull nginx:1.20 docker pull nginx:latest # 从指定仓库拉取 docker pull registry.example.com/nginx:latest 2.2 查看和管理镜像 # 列出本地镜像 docker images docker image ls # 查看镜像详细信息 docker inspect nginx:latest # 查看镜像历史 docker history nginx:latest # 删除镜像 docker rmi nginx:latest docker image rm nginx:latest # 强制删除镜像 docker rmi -f nginx:latest # 删除所有未使用的镜像 docker image prune docker image prune -a # 删除所有未被容器使用的镜像 2.3 构建镜像 # 从 Dockerfile 构建镜像 docker build -t myapp:latest . docker build -t myapp:v1.0 -f Dockerfile.prod . # 构建时传递参数 docker build --build-arg VERSION=1.0 -t myapp:latest . # 不使用缓存构建 docker build --no-cache -t myapp:latest . 2.4 标记和推送镜像 # 给镜像打标签 docker tag myapp:latest username/myapp:latest docker tag myapp:latest registry.example.com/myapp:v1.0 # 推送镜像到仓库 docker push username/myapp:latest docker push registry.example.com/myapp:v1.0 2.5 保存和加载镜像 # 将镜像保存为 tar 文件 docker save -o myapp.tar myapp:latest docker save myapp:latest \u003e myapp.tar # 从 tar 文件加载镜像 docker load -i myapp.tar docker load \u003c myapp.tar # 导出容器为镜像 docker export container_name \u003e container.tar # 从导出文件创建镜像 docker import container.tar myapp:imported 3. 容器管理命令 3.1 运行容器 # 基本运行 docker run nginx # 后台运行 docker run -d nginx # 交互式运行 docker run -it ubuntu:20.04 /bin/bash # 指定容器名称 docker run --name my-nginx -d nginx # 端口映射 docker run -d -p 8080:80 nginx docker run -d -p 127.0.0.1:8080:80 nginx # 环境变量 docker run -d -e MYSQL_ROOT_PASSWORD=password mysql:8.0 # 挂载数据卷 docker run -d -v /host/path:/container/path nginx docker run -d -v my-volume:/var/lib/mysql mysql:8.0 # 网络设置 docker run -d --network my-network nginx # 资源限制 docker run -d --memory=512m --cpus=1.0 nginx # 自动重启 docker run -d --restart=always nginx docker run -d --restart=unless-stopped nginx # 完整示例 docker run -d \\\\ --name my-app \\\\ -p 8080:80 \\\\ -e ENV=production \\\\ -v /host/data:/app/data \\\\ --restart=unless-stopped \\\\ --memory=1g \\\\ --cpus=2.0 \\\\ myapp:latest 3.2 查看和管理容器 # 列出运行中的容器 docker ps # 列出所有容器（包括停止的） docker ps -a # 查看容器详细信息 docker inspect container_name # 查看容器日志 docker logs container_name docker logs -f container_name # 实时查看 docker logs --tail 100 container_name # 查看最后100行 docker logs --since 2023-01-01 container_name # 查看指定时间后的日志 # 查看容器进程 docker top container_name # 查看容器资源使用情况 docker stats docker stats container_name 3.3 容器操作 # 启动容器 docker start container_name # 停止容器 docker stop container_name docker stop -t 30 container_name # 30秒后强制停止 # 重启容器 docker restart container_name # 暂停和恢复容器 docker pause container_name docker unpause container_name # 强制杀死容器 docker kill container_name docker kill -s SIGTERM container_name # 删除容器 docker rm container_name docker rm -f container_name # 强制删除运行中的容器 # 删除所有停止的容器 docker container prune 3.4 进入容器 # 进入运行中的容器 docker exec -it container_name /bin/bash docker exec -it container_name /bin/sh # 以指定用户身份进入 docker exec -it -u root container_name /bin/bash # 在容器中执行命令 docker exec container_name ls -la docker exec -d container_name touch /tmp/test.txt # 附加到容器（不推荐） docker attach container_name 3.5 容器文件操作 # 从容器复制文件到主机 docker cp container_name:/path/to/file /host/path/ # 从主机复制文件到容器 docker cp /host/path/file container_name:/path/to/ # 复制目录 docker cp container_name:/app/logs/ ./logs/ 4. 网络管理命令 4.1 网络基础操作 # 列出网络 docker network ls # 查看网络详细信息 docker network inspect bridge # 创建网络 docker network create my-network docker network create --driver bridge my-bridge docker network create --driver overlay my-overlay # 创建自定义网络 docker network create \\\\ --driver bridge \\\\ --subnet=172.20.0.0/16 \\\\ --ip-range=172.20.240.0/20 \\\\ --gateway=172.20.0.1 \\\\ my-custom-network # 删除网络 docker network rm my-network # 清理未使用的网络 docker network prune 4.2 容器网络连接 # 将容器连接到网络 docker network connect my-network container_name # 断开容器网络连接 docker network disconnect my-network container_name # 运行容器时指定网络 docker run -d --network my-network nginx # 指定容器在网络中的IP docker run -d --network my-network --ip 172.20.0.10 nginx 5. 数据卷管理命令 5.1 数据卷操作 # 列出数据卷 docker volume ls # 创建数据卷 docker volume create my-volume # 查看数据卷详细信息 docker volume inspect my-volume # 删除数据卷 docker volume rm my-volume # 清理未使用的数据卷 docker volume prune 5.2 使用数据卷 # 挂载命名数据卷 docker run -d -v my-volume:/var/lib/mysql mysql:8.0 # 挂载主机目录 docker run -d -v /host/path:/container/path nginx # 只读挂载 docker run -d -v /host/path:/container/path:ro nginx # 使用 --mount 语法（推荐） docker run -d \\\\ --mount type=volume,source=my-volume,target=/var/lib/mysql \\\\ mysql:8.0 docker run -d \\\\ --mount type=bind,source=/host/path,target=/container/path,readonly \\\\ nginx 6. Docker Compose 命令 6.1 基础操作 # 启动服务 docker-compose up docker-compose up -d # 后台运行 # 停止服务 docker-compose down docker-compose down -v # 同时删除数据卷 # 查看服务状态 docker-compose ps # 查看日志 docker-compose logs docker-compose logs -f service_name # 重启服务 docker-compose restart docker-compose restart service_name # 构建镜像 docker-compose build docker-compose build --no-cache # 拉取镜像 docker-compose pull # 执行命令 docker-compose exec service_name /bin/bash # 运行一次性命令 docker-compose run service_name command # 扩展服务 docker-compose up --scale web=3 6.2 配置和验证 # 验证配置文件 docker-compose config # 查看配置 docker-compose config --services docker-compose config --volumes # 使用指定配置文件 docker-compose -f docker-compose.prod.yml up # 使用多个配置文件 docker-compose -f docker-compose.yml -f docker-compose.override.yml up 7. 系统信息和清理命令 7.1 系统信息 # 查看 Docker 系统信息 docker system info # 查看磁盘使用情况 docker system df docker system df -v # 详细信息 # 查看系统事件 docker system events docker system events --since 2023-01-01 7.2 系统清理 # 清理系统（删除未使用的容器、网络、镜像等） docker system prune docker system prune -a # 包括未使用的镜像 docker system prune -f # 强制清理，不询问 # 分别清理不同资源 docker container prune # 清理停止的容器 docker image prune # 清理未使用的镜像 docker network prune # 清理未使用的网络 docker volume prune # 清理未使用的数据卷 # 清理所有资源 docker system prune -a --volumes 8. 实用技巧和最佳实践 8.1 常用组合命令 # 停止所有容器 docker stop $(docker ps -q) # 删除所有容器 docker rm $(docker ps -aq) # 删除所有镜像 docker rmi $(docker images -q) # 删除悬空镜像 docker rmi $(docker images -f \\\"dangling=true\\\" -q) # 查看容器IP地址 docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' container_name # 查看容器端口映射 docker port container_name # 实时监控容器资源使用 watch docker stats 8.2 Dockerfile 最佳实践 # 使用官方基础镜像 FROM node:16-alpine # 设置工作目录 WORKDIR /app # 复制依赖文件并安装（利用缓存） COPY package*.json ./ RUN npm ci --only=production # 复制应用代码 COPY . . # 创建非root用户 RUN addgroup -g 1001 -S nodejs RUN adduser -S nextjs -u 1001 USER nextjs # 暴露端口 EXPOSE 3000 # 健康检查 HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\\ CMD curl -f http://localhost:3000/health || exit 1 # 启动命令 CMD [\\\"npm\\\", \\\"start\\\"] 8.3 安全建议 不要以 root 用户运行容器 docker run -u 1000:1000 myapp 限制容器资源 docker run --memory=512m --cpus=1.0 myapp 使用只读文件系统 docker run --read-only --tmpfs /tmp myapp 扫描镜像漏洞 docker scan myapp:latest 8.4 调试技巧 # 查看容器启动失败原因 docker logs container_name # 进入容器调试 docker run -it --entrypoint /bin/bash myapp:latest # 查看容器文件系统变化 docker diff container_name # 创建容器但不启动 docker create --name debug-container myapp:latest # 从失败的容器创建镜像 docker commit container_name debug-image:latest 8.5 性能优化 # 使用多阶段构建减小镜像大小 # 在 Dockerfile 中 FROM node:16 AS builder WORKDIR /app COPY package*.json ./ RUN npm install COPY . . RUN npm run build FROM node:16-alpine WORKDIR /app COPY --from=builder /app/dist ./dist COPY --from=builder /app/node_modules ./node_modules CMD [\\\"node\\\", \\\"dist/index.js\\\"] # 使用 .dockerignore 文件 echo \\\"node_modules\\\\n.git\\\\n*.log\\\" \u003e .dockerignore 9. 注意事项 始终使用具体的镜像标签而不是 latest 定期清理未使用的资源以节省磁盘空间 使用 Docker Compose 管理多容器应用 遵循安全最佳实践，不要以 root 用户运行容器 利用多阶段构建优化镜像大小 ","wordCount":"1105","inLanguage":"en","datePublished":"2010-08-06T00:00:00Z","dateModified":"2010-08-06T00:00:00Z","author":[{"@type":"Person","name":"wellzhi"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://wellzhi.github.io/posts/tech/2010-08-06_docker/"},"publisher":{"@type":"Organization","name":"wellzhi","logo":{"@type":"ImageObject","url":"https://wellzhi.github.io/favicon.ico"}}}</script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script><script>MathJax={tex:{displayMath:[["\\[","\\]"],["$$","$$"]],inlineMath:[["\\(","\\)"],["$","$"]]}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wellzhi.github.io/ accesskey=h title="wellzhi (Alt + H)">wellzhi</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wellzhi.github.io/ title=Home><span>Home</span></a></li><li><a href=https://wellzhi.github.io/posts/ title=Post><span>Post</span></a></li><li><a href=https://wellzhi.github.io/archives title=Archive><span>Archive</span></a></li><li><a href=https://wellzhi.github.io/tags title=Tags><span>Tags</span></a></li><li><a href=https://wellzhi.github.io/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://wellzhi.github.io/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wellzhi.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://wellzhi.github.io/posts/>Posts</a>&nbsp;»&nbsp;<a href=https://wellzhi.github.io/posts/tech/>Tech</a></div><h1 class="post-title entry-hint-parent">Docker常用命令</h1></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#1-docker-%e5%9f%ba%e7%a1%80%e5%91%bd%e4%bb%a4 aria-label="1. Docker 基础命令">1. Docker 基础命令</a><ul><li><a href=#11-%e6%9f%a5%e7%9c%8b-docker-%e7%89%88%e6%9c%ac%e5%92%8c%e4%bf%a1%e6%81%af aria-label="1.1 查看 Docker 版本和信息">1.1 查看 Docker 版本和信息</a></li><li><a href=#12-%e7%99%bb%e5%bd%95%e5%92%8c%e7%99%bb%e5%87%ba-docker-hub aria-label="1.2 登录和登出 Docker Hub">1.2 登录和登出 Docker Hub</a></li></ul></li><li><a href=#2-%e9%95%9c%e5%83%8f%e7%ae%a1%e7%90%86%e5%91%bd%e4%bb%a4 aria-label="2. 镜像管理命令">2. 镜像管理命令</a><ul><li><a href=#21-%e6%90%9c%e7%b4%a2%e5%92%8c%e6%8b%89%e5%8f%96%e9%95%9c%e5%83%8f aria-label="2.1 搜索和拉取镜像">2.1 搜索和拉取镜像</a></li><li><a href=#22-%e6%9f%a5%e7%9c%8b%e5%92%8c%e7%ae%a1%e7%90%86%e9%95%9c%e5%83%8f aria-label="2.2 查看和管理镜像">2.2 查看和管理镜像</a></li><li><a href=#23-%e6%9e%84%e5%bb%ba%e9%95%9c%e5%83%8f aria-label="2.3 构建镜像">2.3 构建镜像</a></li><li><a href=#24-%e6%a0%87%e8%ae%b0%e5%92%8c%e6%8e%a8%e9%80%81%e9%95%9c%e5%83%8f aria-label="2.4 标记和推送镜像">2.4 标记和推送镜像</a></li><li><a href=#25-%e4%bf%9d%e5%ad%98%e5%92%8c%e5%8a%a0%e8%bd%bd%e9%95%9c%e5%83%8f aria-label="2.5 保存和加载镜像">2.5 保存和加载镜像</a></li></ul></li><li><a href=#3-%e5%ae%b9%e5%99%a8%e7%ae%a1%e7%90%86%e5%91%bd%e4%bb%a4 aria-label="3. 容器管理命令">3. 容器管理命令</a><ul><li><a href=#31-%e8%bf%90%e8%a1%8c%e5%ae%b9%e5%99%a8 aria-label="3.1 运行容器">3.1 运行容器</a></li><li><a href=#32-%e6%9f%a5%e7%9c%8b%e5%92%8c%e7%ae%a1%e7%90%86%e5%ae%b9%e5%99%a8 aria-label="3.2 查看和管理容器">3.2 查看和管理容器</a></li><li><a href=#33-%e5%ae%b9%e5%99%a8%e6%93%8d%e4%bd%9c aria-label="3.3 容器操作">3.3 容器操作</a></li><li><a href=#34-%e8%bf%9b%e5%85%a5%e5%ae%b9%e5%99%a8 aria-label="3.4 进入容器">3.4 进入容器</a></li><li><a href=#35-%e5%ae%b9%e5%99%a8%e6%96%87%e4%bb%b6%e6%93%8d%e4%bd%9c aria-label="3.5 容器文件操作">3.5 容器文件操作</a></li></ul></li><li><a href=#4-%e7%bd%91%e7%bb%9c%e7%ae%a1%e7%90%86%e5%91%bd%e4%bb%a4 aria-label="4. 网络管理命令">4. 网络管理命令</a><ul><li><a href=#41-%e7%bd%91%e7%bb%9c%e5%9f%ba%e7%a1%80%e6%93%8d%e4%bd%9c aria-label="4.1 网络基础操作">4.1 网络基础操作</a></li><li><a href=#42-%e5%ae%b9%e5%99%a8%e7%bd%91%e7%bb%9c%e8%bf%9e%e6%8e%a5 aria-label="4.2 容器网络连接">4.2 容器网络连接</a></li></ul></li><li><a href=#5-%e6%95%b0%e6%8d%ae%e5%8d%b7%e7%ae%a1%e7%90%86%e5%91%bd%e4%bb%a4 aria-label="5. 数据卷管理命令">5. 数据卷管理命令</a><ul><li><a href=#51-%e6%95%b0%e6%8d%ae%e5%8d%b7%e6%93%8d%e4%bd%9c aria-label="5.1 数据卷操作">5.1 数据卷操作</a></li><li><a href=#52-%e4%bd%bf%e7%94%a8%e6%95%b0%e6%8d%ae%e5%8d%b7 aria-label="5.2 使用数据卷">5.2 使用数据卷</a></li></ul></li><li><a href=#6-docker-compose-%e5%91%bd%e4%bb%a4 aria-label="6. Docker Compose 命令">6. Docker Compose 命令</a><ul><li><a href=#61-%e5%9f%ba%e7%a1%80%e6%93%8d%e4%bd%9c aria-label="6.1 基础操作">6.1 基础操作</a></li><li><a href=#62-%e9%85%8d%e7%bd%ae%e5%92%8c%e9%aa%8c%e8%af%81 aria-label="6.2 配置和验证">6.2 配置和验证</a></li></ul></li><li><a href=#7-%e7%b3%bb%e7%bb%9f%e4%bf%a1%e6%81%af%e5%92%8c%e6%b8%85%e7%90%86%e5%91%bd%e4%bb%a4 aria-label="7. 系统信息和清理命令">7. 系统信息和清理命令</a><ul><li><a href=#71-%e7%b3%bb%e7%bb%9f%e4%bf%a1%e6%81%af aria-label="7.1 系统信息">7.1 系统信息</a></li><li><a href=#72-%e7%b3%bb%e7%bb%9f%e6%b8%85%e7%90%86 aria-label="7.2 系统清理">7.2 系统清理</a></li></ul></li><li><a href=#8-%e5%ae%9e%e7%94%a8%e6%8a%80%e5%b7%a7%e5%92%8c%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label="8. 实用技巧和最佳实践">8. 实用技巧和最佳实践</a><ul><li><a href=#81-%e5%b8%b8%e7%94%a8%e7%bb%84%e5%90%88%e5%91%bd%e4%bb%a4 aria-label="8.1 常用组合命令">8.1 常用组合命令</a></li><li><a href=#82-dockerfile-%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label="8.2 Dockerfile 最佳实践">8.2 Dockerfile 最佳实践</a></li><li><a href=#83-%e5%ae%89%e5%85%a8%e5%bb%ba%e8%ae%ae aria-label="8.3 安全建议">8.3 安全建议</a></li><li><a href=#84-%e8%b0%83%e8%af%95%e6%8a%80%e5%b7%a7 aria-label="8.4 调试技巧">8.4 调试技巧</a></li><li><a href=#85-%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96 aria-label="8.5 性能优化">8.5 性能优化</a></li></ul></li><li><a href=#9-%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9 aria-label="9. 注意事项">9. 注意事项</a></li></ul></div></details></div><div class=post-content><p>Docker 是一个开源的容器化平台，它允许开发者将应用程序及其依赖项打包到轻量级、可移植的容器中。</p><h2 id=1-docker-基础命令>1. Docker 基础命令<a hidden class=anchor aria-hidden=true href=#1-docker-基础命令>#</a></h2><h3 id=11-查看-docker-版本和信息>1.1 查看 Docker 版本和信息<a hidden class=anchor aria-hidden=true href=#11-查看-docker-版本和信息>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 查看 Docker 版本</span>
</span></span><span style=display:flex><span>docker --version
</span></span><span style=display:flex><span>docker version
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看 Docker 系统信息</span>
</span></span><span style=display:flex><span>docker info
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看 Docker 帮助</span>
</span></span><span style=display:flex><span>docker --help
</span></span><span style=display:flex><span>docker &lt;command&gt; --help
</span></span></code></pre></div><h3 id=12-登录和登出-docker-hub>1.2 登录和登出 Docker Hub<a hidden class=anchor aria-hidden=true href=#12-登录和登出-docker-hub>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 登录 Docker Hub</span>
</span></span><span style=display:flex><span>docker login
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 登录指定仓库</span>
</span></span><span style=display:flex><span>docker login registry.example.com
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 登出</span>
</span></span><span style=display:flex><span>docker logout
</span></span></code></pre></div><h2 id=2-镜像管理命令>2. 镜像管理命令<a hidden class=anchor aria-hidden=true href=#2-镜像管理命令>#</a></h2><h3 id=21-搜索和拉取镜像>2.1 搜索和拉取镜像<a hidden class=anchor aria-hidden=true href=#21-搜索和拉取镜像>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 搜索镜像</span>
</span></span><span style=display:flex><span>docker search nginx
</span></span><span style=display:flex><span>docker search --limit <span style=color:#ae81ff>10</span> nginx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 拉取镜像</span>
</span></span><span style=display:flex><span>docker pull nginx
</span></span><span style=display:flex><span>docker pull nginx:1.20
</span></span><span style=display:flex><span>docker pull nginx:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 从指定仓库拉取</span>
</span></span><span style=display:flex><span>docker pull registry.example.com/nginx:latest
</span></span></code></pre></div><h3 id=22-查看和管理镜像>2.2 查看和管理镜像<a hidden class=anchor aria-hidden=true href=#22-查看和管理镜像>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 列出本地镜像</span>
</span></span><span style=display:flex><span>docker images
</span></span><span style=display:flex><span>docker image ls
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看镜像详细信息</span>
</span></span><span style=display:flex><span>docker inspect nginx:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看镜像历史</span>
</span></span><span style=display:flex><span>docker history nginx:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 删除镜像</span>
</span></span><span style=display:flex><span>docker rmi nginx:latest
</span></span><span style=display:flex><span>docker image rm nginx:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 强制删除镜像</span>
</span></span><span style=display:flex><span>docker rmi -f nginx:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 删除所有未使用的镜像</span>
</span></span><span style=display:flex><span>docker image prune
</span></span><span style=display:flex><span>docker image prune -a  <span style=color:#75715e># 删除所有未被容器使用的镜像</span>
</span></span></code></pre></div><h3 id=23-构建镜像>2.3 构建镜像<a hidden class=anchor aria-hidden=true href=#23-构建镜像>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 从 Dockerfile 构建镜像</span>
</span></span><span style=display:flex><span>docker build -t myapp:latest .
</span></span><span style=display:flex><span>docker build -t myapp:v1.0 -f Dockerfile.prod .
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 构建时传递参数</span>
</span></span><span style=display:flex><span>docker build --build-arg VERSION<span style=color:#f92672>=</span>1.0 -t myapp:latest .
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 不使用缓存构建</span>
</span></span><span style=display:flex><span>docker build --no-cache -t myapp:latest .
</span></span></code></pre></div><h3 id=24-标记和推送镜像>2.4 标记和推送镜像<a hidden class=anchor aria-hidden=true href=#24-标记和推送镜像>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 给镜像打标签</span>
</span></span><span style=display:flex><span>docker tag myapp:latest username/myapp:latest
</span></span><span style=display:flex><span>docker tag myapp:latest registry.example.com/myapp:v1.0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 推送镜像到仓库</span>
</span></span><span style=display:flex><span>docker push username/myapp:latest
</span></span><span style=display:flex><span>docker push registry.example.com/myapp:v1.0
</span></span></code></pre></div><h3 id=25-保存和加载镜像>2.5 保存和加载镜像<a hidden class=anchor aria-hidden=true href=#25-保存和加载镜像>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 将镜像保存为 tar 文件</span>
</span></span><span style=display:flex><span>docker save -o myapp.tar myapp:latest
</span></span><span style=display:flex><span>docker save myapp:latest &gt; myapp.tar
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 从 tar 文件加载镜像</span>
</span></span><span style=display:flex><span>docker load -i myapp.tar
</span></span><span style=display:flex><span>docker load &lt; myapp.tar
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 导出容器为镜像</span>
</span></span><span style=display:flex><span>docker export container_name &gt; container.tar
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 从导出文件创建镜像</span>
</span></span><span style=display:flex><span>docker import container.tar myapp:imported
</span></span></code></pre></div><h2 id=3-容器管理命令>3. 容器管理命令<a hidden class=anchor aria-hidden=true href=#3-容器管理命令>#</a></h2><h3 id=31-运行容器>3.1 运行容器<a hidden class=anchor aria-hidden=true href=#31-运行容器>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 基本运行</span>
</span></span><span style=display:flex><span>docker run nginx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 后台运行</span>
</span></span><span style=display:flex><span>docker run -d nginx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 交互式运行</span>
</span></span><span style=display:flex><span>docker run -it ubuntu:20.04 /bin/bash
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 指定容器名称</span>
</span></span><span style=display:flex><span>docker run --name my-nginx -d nginx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 端口映射</span>
</span></span><span style=display:flex><span>docker run -d -p 8080:80 nginx
</span></span><span style=display:flex><span>docker run -d -p 127.0.0.1:8080:80 nginx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 环境变量</span>
</span></span><span style=display:flex><span>docker run -d -e MYSQL_ROOT_PASSWORD<span style=color:#f92672>=</span>password mysql:8.0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 挂载数据卷</span>
</span></span><span style=display:flex><span>docker run -d -v /host/path:/container/path nginx
</span></span><span style=display:flex><span>docker run -d -v my-volume:/var/lib/mysql mysql:8.0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 网络设置</span>
</span></span><span style=display:flex><span>docker run -d --network my-network nginx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 资源限制</span>
</span></span><span style=display:flex><span>docker run -d --memory<span style=color:#f92672>=</span>512m --cpus<span style=color:#f92672>=</span>1.0 nginx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 自动重启</span>
</span></span><span style=display:flex><span>docker run -d --restart<span style=color:#f92672>=</span>always nginx
</span></span><span style=display:flex><span>docker run -d --restart<span style=color:#f92672>=</span>unless-stopped nginx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 完整示例</span>
</span></span><span style=display:flex><span>docker run -d <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  --name my-app <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  -p 8080:80 <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  -e ENV<span style=color:#f92672>=</span>production <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  -v /host/data:/app/data <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  --restart<span style=color:#f92672>=</span>unless-stopped <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  --memory<span style=color:#f92672>=</span>1g <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  --cpus<span style=color:#f92672>=</span>2.0 <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  myapp:latest
</span></span></code></pre></div><h3 id=32-查看和管理容器>3.2 查看和管理容器<a hidden class=anchor aria-hidden=true href=#32-查看和管理容器>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 列出运行中的容器</span>
</span></span><span style=display:flex><span>docker ps
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 列出所有容器（包括停止的）</span>
</span></span><span style=display:flex><span>docker ps -a
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看容器详细信息</span>
</span></span><span style=display:flex><span>docker inspect container_name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看容器日志</span>
</span></span><span style=display:flex><span>docker logs container_name
</span></span><span style=display:flex><span>docker logs -f container_name  <span style=color:#75715e># 实时查看</span>
</span></span><span style=display:flex><span>docker logs --tail <span style=color:#ae81ff>100</span> container_name  <span style=color:#75715e># 查看最后100行</span>
</span></span><span style=display:flex><span>docker logs --since 2023-01-01 container_name  <span style=color:#75715e># 查看指定时间后的日志</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看容器进程</span>
</span></span><span style=display:flex><span>docker top container_name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看容器资源使用情况</span>
</span></span><span style=display:flex><span>docker stats
</span></span><span style=display:flex><span>docker stats container_name
</span></span></code></pre></div><h3 id=33-容器操作>3.3 容器操作<a hidden class=anchor aria-hidden=true href=#33-容器操作>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 启动容器</span>
</span></span><span style=display:flex><span>docker start container_name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 停止容器</span>
</span></span><span style=display:flex><span>docker stop container_name
</span></span><span style=display:flex><span>docker stop -t <span style=color:#ae81ff>30</span> container_name  <span style=color:#75715e># 30秒后强制停止</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 重启容器</span>
</span></span><span style=display:flex><span>docker restart container_name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 暂停和恢复容器</span>
</span></span><span style=display:flex><span>docker pause container_name
</span></span><span style=display:flex><span>docker unpause container_name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 强制杀死容器</span>
</span></span><span style=display:flex><span>docker kill container_name
</span></span><span style=display:flex><span>docker kill -s SIGTERM container_name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 删除容器</span>
</span></span><span style=display:flex><span>docker rm container_name
</span></span><span style=display:flex><span>docker rm -f container_name  <span style=color:#75715e># 强制删除运行中的容器</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 删除所有停止的容器</span>
</span></span><span style=display:flex><span>docker container prune
</span></span></code></pre></div><h3 id=34-进入容器>3.4 进入容器<a hidden class=anchor aria-hidden=true href=#34-进入容器>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 进入运行中的容器</span>
</span></span><span style=display:flex><span>docker exec -it container_name /bin/bash
</span></span><span style=display:flex><span>docker exec -it container_name /bin/sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 以指定用户身份进入</span>
</span></span><span style=display:flex><span>docker exec -it -u root container_name /bin/bash
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 在容器中执行命令</span>
</span></span><span style=display:flex><span>docker exec container_name ls -la
</span></span><span style=display:flex><span>docker exec -d container_name touch /tmp/test.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 附加到容器（不推荐）</span>
</span></span><span style=display:flex><span>docker attach container_name
</span></span></code></pre></div><h3 id=35-容器文件操作>3.5 容器文件操作<a hidden class=anchor aria-hidden=true href=#35-容器文件操作>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 从容器复制文件到主机</span>
</span></span><span style=display:flex><span>docker cp container_name:/path/to/file /host/path/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 从主机复制文件到容器</span>
</span></span><span style=display:flex><span>docker cp /host/path/file container_name:/path/to/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 复制目录</span>
</span></span><span style=display:flex><span>docker cp container_name:/app/logs/ ./logs/
</span></span></code></pre></div><h2 id=4-网络管理命令>4. 网络管理命令<a hidden class=anchor aria-hidden=true href=#4-网络管理命令>#</a></h2><h3 id=41-网络基础操作>4.1 网络基础操作<a hidden class=anchor aria-hidden=true href=#41-网络基础操作>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 列出网络</span>
</span></span><span style=display:flex><span>docker network ls
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看网络详细信息</span>
</span></span><span style=display:flex><span>docker network inspect bridge
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 创建网络</span>
</span></span><span style=display:flex><span>docker network create my-network
</span></span><span style=display:flex><span>docker network create --driver bridge my-bridge
</span></span><span style=display:flex><span>docker network create --driver overlay my-overlay
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 创建自定义网络</span>
</span></span><span style=display:flex><span>docker network create <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  --driver bridge <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  --subnet<span style=color:#f92672>=</span>172.20.0.0/16 <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  --ip-range<span style=color:#f92672>=</span>172.20.240.0/20 <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  --gateway<span style=color:#f92672>=</span>172.20.0.1 <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  my-custom-network
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 删除网络</span>
</span></span><span style=display:flex><span>docker network rm my-network
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 清理未使用的网络</span>
</span></span><span style=display:flex><span>docker network prune
</span></span></code></pre></div><h3 id=42-容器网络连接>4.2 容器网络连接<a hidden class=anchor aria-hidden=true href=#42-容器网络连接>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 将容器连接到网络</span>
</span></span><span style=display:flex><span>docker network connect my-network container_name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 断开容器网络连接</span>
</span></span><span style=display:flex><span>docker network disconnect my-network container_name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 运行容器时指定网络</span>
</span></span><span style=display:flex><span>docker run -d --network my-network nginx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 指定容器在网络中的IP</span>
</span></span><span style=display:flex><span>docker run -d --network my-network --ip 172.20.0.10 nginx
</span></span></code></pre></div><h2 id=5-数据卷管理命令>5. 数据卷管理命令<a hidden class=anchor aria-hidden=true href=#5-数据卷管理命令>#</a></h2><h3 id=51-数据卷操作>5.1 数据卷操作<a hidden class=anchor aria-hidden=true href=#51-数据卷操作>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 列出数据卷</span>
</span></span><span style=display:flex><span>docker volume ls
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 创建数据卷</span>
</span></span><span style=display:flex><span>docker volume create my-volume
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看数据卷详细信息</span>
</span></span><span style=display:flex><span>docker volume inspect my-volume
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 删除数据卷</span>
</span></span><span style=display:flex><span>docker volume rm my-volume
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 清理未使用的数据卷</span>
</span></span><span style=display:flex><span>docker volume prune
</span></span></code></pre></div><h3 id=52-使用数据卷>5.2 使用数据卷<a hidden class=anchor aria-hidden=true href=#52-使用数据卷>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 挂载命名数据卷</span>
</span></span><span style=display:flex><span>docker run -d -v my-volume:/var/lib/mysql mysql:8.0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 挂载主机目录</span>
</span></span><span style=display:flex><span>docker run -d -v /host/path:/container/path nginx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 只读挂载</span>
</span></span><span style=display:flex><span>docker run -d -v /host/path:/container/path:ro nginx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 使用 --mount 语法（推荐）</span>
</span></span><span style=display:flex><span>docker run -d <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  --mount type<span style=color:#f92672>=</span>volume,source<span style=color:#f92672>=</span>my-volume,target<span style=color:#f92672>=</span>/var/lib/mysql <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  mysql:8.0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>docker run -d <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  --mount type<span style=color:#f92672>=</span>bind,source<span style=color:#f92672>=</span>/host/path,target<span style=color:#f92672>=</span>/container/path,readonly <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  nginx
</span></span></code></pre></div><h2 id=6-docker-compose-命令>6. Docker Compose 命令<a hidden class=anchor aria-hidden=true href=#6-docker-compose-命令>#</a></h2><h3 id=61-基础操作>6.1 基础操作<a hidden class=anchor aria-hidden=true href=#61-基础操作>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 启动服务</span>
</span></span><span style=display:flex><span>docker-compose up
</span></span><span style=display:flex><span>docker-compose up -d  <span style=color:#75715e># 后台运行</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 停止服务</span>
</span></span><span style=display:flex><span>docker-compose down
</span></span><span style=display:flex><span>docker-compose down -v  <span style=color:#75715e># 同时删除数据卷</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看服务状态</span>
</span></span><span style=display:flex><span>docker-compose ps
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看日志</span>
</span></span><span style=display:flex><span>docker-compose logs
</span></span><span style=display:flex><span>docker-compose logs -f service_name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 重启服务</span>
</span></span><span style=display:flex><span>docker-compose restart
</span></span><span style=display:flex><span>docker-compose restart service_name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 构建镜像</span>
</span></span><span style=display:flex><span>docker-compose build
</span></span><span style=display:flex><span>docker-compose build --no-cache
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 拉取镜像</span>
</span></span><span style=display:flex><span>docker-compose pull
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 执行命令</span>
</span></span><span style=display:flex><span>docker-compose exec service_name /bin/bash
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 运行一次性命令</span>
</span></span><span style=display:flex><span>docker-compose run service_name command
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 扩展服务</span>
</span></span><span style=display:flex><span>docker-compose up --scale web<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>
</span></span></code></pre></div><h3 id=62-配置和验证>6.2 配置和验证<a hidden class=anchor aria-hidden=true href=#62-配置和验证>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 验证配置文件</span>
</span></span><span style=display:flex><span>docker-compose config
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看配置</span>
</span></span><span style=display:flex><span>docker-compose config --services
</span></span><span style=display:flex><span>docker-compose config --volumes
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 使用指定配置文件</span>
</span></span><span style=display:flex><span>docker-compose -f docker-compose.prod.yml up
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 使用多个配置文件</span>
</span></span><span style=display:flex><span>docker-compose -f docker-compose.yml -f docker-compose.override.yml up
</span></span></code></pre></div><h2 id=7-系统信息和清理命令>7. 系统信息和清理命令<a hidden class=anchor aria-hidden=true href=#7-系统信息和清理命令>#</a></h2><h3 id=71-系统信息>7.1 系统信息<a hidden class=anchor aria-hidden=true href=#71-系统信息>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 查看 Docker 系统信息</span>
</span></span><span style=display:flex><span>docker system info
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看磁盘使用情况</span>
</span></span><span style=display:flex><span>docker system df
</span></span><span style=display:flex><span>docker system df -v  <span style=color:#75715e># 详细信息</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看系统事件</span>
</span></span><span style=display:flex><span>docker system events
</span></span><span style=display:flex><span>docker system events --since 2023-01-01
</span></span></code></pre></div><h3 id=72-系统清理>7.2 系统清理<a hidden class=anchor aria-hidden=true href=#72-系统清理>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 清理系统（删除未使用的容器、网络、镜像等）</span>
</span></span><span style=display:flex><span>docker system prune
</span></span><span style=display:flex><span>docker system prune -a  <span style=color:#75715e># 包括未使用的镜像</span>
</span></span><span style=display:flex><span>docker system prune -f  <span style=color:#75715e># 强制清理，不询问</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 分别清理不同资源</span>
</span></span><span style=display:flex><span>docker container prune  <span style=color:#75715e># 清理停止的容器</span>
</span></span><span style=display:flex><span>docker image prune      <span style=color:#75715e># 清理未使用的镜像</span>
</span></span><span style=display:flex><span>docker network prune    <span style=color:#75715e># 清理未使用的网络</span>
</span></span><span style=display:flex><span>docker volume prune     <span style=color:#75715e># 清理未使用的数据卷</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 清理所有资源</span>
</span></span><span style=display:flex><span>docker system prune -a --volumes
</span></span></code></pre></div><h2 id=8-实用技巧和最佳实践>8. 实用技巧和最佳实践<a hidden class=anchor aria-hidden=true href=#8-实用技巧和最佳实践>#</a></h2><h3 id=81-常用组合命令>8.1 常用组合命令<a hidden class=anchor aria-hidden=true href=#81-常用组合命令>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 停止所有容器</span>
</span></span><span style=display:flex><span>docker stop <span style=color:#66d9ef>$(</span>docker ps -q<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 删除所有容器</span>
</span></span><span style=display:flex><span>docker rm <span style=color:#66d9ef>$(</span>docker ps -aq<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 删除所有镜像</span>
</span></span><span style=display:flex><span>docker rmi <span style=color:#66d9ef>$(</span>docker images -q<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 删除悬空镜像</span>
</span></span><span style=display:flex><span>docker rmi <span style=color:#66d9ef>$(</span>docker images -f <span style=color:#ae81ff>\&#34;</span>dangling<span style=color:#f92672>=</span>true<span style=color:#ae81ff>\&#34;</span> -q<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看容器IP地址</span>
</span></span><span style=display:flex><span>docker inspect -f <span style=color:#e6db74>&#39;{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}&#39;</span> container_name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看容器端口映射</span>
</span></span><span style=display:flex><span>docker port container_name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 实时监控容器资源使用</span>
</span></span><span style=display:flex><span>watch docker stats
</span></span></code></pre></div><h3 id=82-dockerfile-最佳实践>8.2 Dockerfile 最佳实践<a hidden class=anchor aria-hidden=true href=#82-dockerfile-最佳实践>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#75715e># 使用官方基础镜像</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> node:16-alpine</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># 设置工作目录</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>WORKDIR</span><span style=color:#e6db74> /app</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># 复制依赖文件并安装（利用缓存）</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> package*.json ./<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> npm ci --only<span style=color:#f92672>=</span>production<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># 复制应用代码</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> . .<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># 创建非root用户</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> addgroup -g <span style=color:#ae81ff>1001</span> -S nodejs<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> adduser -S nextjs -u <span style=color:#ae81ff>1001</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>USER</span><span style=color:#e6db74> nextjs</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># 暴露端口</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>EXPOSE</span><span style=color:#e6db74> 3000</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># 健康检查</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>HEALTHCHECK --interval=30s --timeout=3s </span>--start-period<span style=color:#f92672>=</span>5s --retries<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span> <span style=color:#ae81ff>\\</span>
</span></span><span style=display:flex><span>  CMD curl -f http://localhost:3000/health <span style=color:#f92672>||</span> exit <span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># 启动命令</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>CMD</span> [<span style=color:#960050;background-color:#1e0010>\</span><span style=color:#e6db74>&#34;npm\&#34;, \&#34;start\&#34;</span>]<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=83-安全建议>8.3 安全建议<a hidden class=anchor aria-hidden=true href=#83-安全建议>#</a></h3><ol><li><strong>不要以 root 用户运行容器</strong></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run -u 1000:1000 myapp
</span></span></code></pre></div><ol start=2><li><strong>限制容器资源</strong></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run --memory<span style=color:#f92672>=</span>512m --cpus<span style=color:#f92672>=</span>1.0 myapp
</span></span></code></pre></div><ol start=3><li><strong>使用只读文件系统</strong></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run --read-only --tmpfs /tmp myapp
</span></span></code></pre></div><ol start=4><li><strong>扫描镜像漏洞</strong></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker scan myapp:latest
</span></span></code></pre></div><h3 id=84-调试技巧>8.4 调试技巧<a hidden class=anchor aria-hidden=true href=#84-调试技巧>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 查看容器启动失败原因</span>
</span></span><span style=display:flex><span>docker logs container_name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 进入容器调试</span>
</span></span><span style=display:flex><span>docker run -it --entrypoint /bin/bash myapp:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查看容器文件系统变化</span>
</span></span><span style=display:flex><span>docker diff container_name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 创建容器但不启动</span>
</span></span><span style=display:flex><span>docker create --name debug-container myapp:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 从失败的容器创建镜像</span>
</span></span><span style=display:flex><span>docker commit container_name debug-image:latest
</span></span></code></pre></div><h3 id=85-性能优化>8.5 性能优化<a hidden class=anchor aria-hidden=true href=#85-性能优化>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 使用多阶段构建减小镜像大小</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 在 Dockerfile 中</span>
</span></span><span style=display:flex><span>FROM node:16 AS builder
</span></span><span style=display:flex><span>WORKDIR /app
</span></span><span style=display:flex><span>COPY package*.json ./
</span></span><span style=display:flex><span>RUN npm install
</span></span><span style=display:flex><span>COPY . .
</span></span><span style=display:flex><span>RUN npm run build
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>FROM node:16-alpine
</span></span><span style=display:flex><span>WORKDIR /app
</span></span><span style=display:flex><span>COPY --from<span style=color:#f92672>=</span>builder /app/dist ./dist
</span></span><span style=display:flex><span>COPY --from<span style=color:#f92672>=</span>builder /app/node_modules ./node_modules
</span></span><span style=display:flex><span>CMD <span style=color:#f92672>[</span><span style=color:#ae81ff>\&#34;</span>node<span style=color:#ae81ff>\&#34;</span>, <span style=color:#ae81ff>\&#34;</span>dist/index.js<span style=color:#ae81ff>\&#34;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 使用 .dockerignore 文件</span>
</span></span><span style=display:flex><span>echo <span style=color:#ae81ff>\&#34;</span>node_modules<span style=color:#ae81ff>\\</span>n.git<span style=color:#ae81ff>\\</span>n*.log<span style=color:#ae81ff>\&#34;</span> &gt; .dockerignore
</span></span></code></pre></div><h2 id=9-注意事项>9. 注意事项<a hidden class=anchor aria-hidden=true href=#9-注意事项>#</a></h2><ul><li>始终使用具体的镜像标签而不是 <code>latest</code></li><li>定期清理未使用的资源以节省磁盘空间</li><li>使用 Docker Compose 管理多容器应用</li><li>遵循安全最佳实践，不要以 root 用户运行容器</li><li>利用多阶段构建优化镜像大小</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://wellzhi.github.io/tags/docker/>Docker</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://wellzhi.github.io/>wellzhi</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light"),theme=""):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"),theme="dark"),mermaidTextContents.forEach((e,t)=>{document.getElementsByClassName("language-mermaid")[t].removeAttribute("data-processed"),document.getElementsByClassName("language-mermaid")[t].innerHTML=e}),mermaid.initialize({theme,startOnLoad:!0}),mermaid.init(void 0,".language-mermaid")})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script>localStorage.getItem("pref-theme")=="dark"?theme="dark":theme="",mermaidTextContents=Array.from(document.getElementsByClassName("language-mermaid")).map(e=>e.innerHTML),mermaid.initialize({theme,startOnLoad:!0}),mermaid.init(void 0,".language-mermaid")</script></body></html>